<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ•™å¸«å¡«å ±ç³»çµ±</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      background: linear-gradient(135deg, #fff0f6, #f8f9fa);
      text-align: center;
      padding: 30px;
    }
    h2 {
      font-size: 32px;
      color: #ff4d6d;
      margin-bottom: 20px;
    }
    h3 {
      font-size: 24px;
      color: #ff6f61;
      margin-bottom: 15px;
    }
    .container { 
      margin: 20px auto; 
      max-width: 600px; 
    }
    button {
      display: block;
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      border: none;
      border-radius: 16px;
      background: #ffb6c1;
      color: #333;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
    }
    button:hover {
      background: #ff8fa3;
      transform: scale(1.03);
    }
    .back-btn {
      background: #ffe066;
      margin-top: 15px;
    }
    .back-btn:hover {
      background: #ffd43b;
    }
    .home-btn {
      background: #74c0fc;
      margin-top: 10px;
    }
    .home-btn:hover {
      background: #4dabf7;
    }
    iframe {
      width: 90%;
      height: 85vh; /* é«˜ä¸€é»ä½†ä¸æ˜¯å…¨æ»¿ */
      border: none;
      margin: 20px auto;
      display: block;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      background: #fff;
    }
  </style>
</head>
<body>

  <h2>ğŸŒ¸ æ•™å¸«å¡«å ±ç³»çµ± ğŸŒ¸</h2>
  <div id="app" class="container"></div>

  <script>
    const data = {
      "åœ‹æ–‡ç§‘": ["é™³æ·‘å›", "æ—é ¤", "éŸ‹çª", "èŠæƒ é›¯", "é»ƒå˜‰ç²"],
      "è‹±æ–‡ç§‘": ["å³æ€¡æ…§", "åŠ‰ä½©èŠ", "å‘¨æš‰å¥", "æ›¹ç‘‹å‹»", "é™³å·§ç²"],
      "æ•¸å­¸ç§‘": ["è”¡æ˜ä½‘", "ä½™å§å¦®", "è¬å¿ å¿—"],
      "é¤Šæ®–ç§‘": ["é™¶ç”³ç§‹"],
      "è¼ªæ©Ÿç§‘": ["ç‹åœ‹å¿ ", "åŠ‰éŸ‹å¿—", "é‚±åƒç‘‹", "é™³ç¶­æ”¿", "é™³æŸ”ç¾½"],
      "æ©Ÿé›»/èˆ¹æ©Ÿç§‘": ["å³æ˜­å½¬", "å¼µå¿—è±ª", "æ—è¡£è¡½"],
      "é›»å­ç§‘": ["è¶™æ™¯æ¾", "å³æ˜é †"],
      "é£Ÿå“ç§‘(æ°´é£Ÿ/çƒ˜ç„™)": ["è¬ä½©è“‰", "æ–¹éƒå©·", "é™³æ…§å¦‚", "æ¸¸è»’éŠ˜", "ç¾…æ°¸ç¦"],
      "é«”è‚²ç§‘": ["åš´æ·‘å¨Ÿ", "å³ä¿Šè³¢"]
    };

    const classes = {
      "é¤Šæ®–ä¸€": ["ä½•Oæ»•", "éƒ­Oå–†"],
      "è¼ªæ©Ÿä¸€": ["æ–½Oé‹’", "éŒ¢Oç¶¸"],
      "èˆ¹æ©Ÿä¸€": ["è¾›Oè»’", "æ—Oçš‡"],
      "é›»ä¸€ç”²": ["å½­Oå»º"],
      "æ°´é£Ÿä¸€": ["æOä¿¡", "ç‹Oç­‘", "è”¡Oå¦"],
      "çƒ˜ç„™ä¸€": ["æ—Oæˆ", "å¼µOç¿”", "å³Oæ¶µ", "è”¡Oå¦¤", "è”¡Oåº­"],
      "é«”è‚²ä¸€": ["é»ƒOç¥"]
    };

    const formBase = "https://docs.google.com/forms/d/e/1FAIpQLSeRfJZfRvAmuCb3jMsinpWX7O-XBSNFvDzJpe86WyXgs3kOuw/viewform?usp=pp_url";

    const subjectIcons = {
      "åœ‹æ–‡ç§‘": "ğŸ“˜",
      "è‹±æ–‡ç§‘": "ğŸ“",
      "æ•¸å­¸ç§‘": "ğŸ”¢",
      "é¤Šæ®–ç§‘": "ğŸŸ",
      "è¼ªæ©Ÿç§‘": "âš™ï¸",
      "æ©Ÿé›»/èˆ¹æ©Ÿç§‘": "ğŸ”§",
      "é›»å­ç§‘": "ğŸ’¡",
      "é£Ÿå“ç§‘(æ°´é£Ÿ/çƒ˜ç„™)": "ğŸ",
      "é«”è‚²ç§‘": "âš½"
    };

    let historyStack = []; 
    const app = document.getElementById("app");

    function renderSubjects() {
      app.innerHTML = "<h3>è«‹é¸æ“‡ç§‘åˆ¥ âœ¨</h3>";
      for (let subject in data) {
        addButton(`${subjectIcons[subject]} ${subject}`, () => {
          historyStack.push(renderSubjects);
          renderTeachers(subject);
        });
      }
    }

    function renderTeachers(subject) {
      app.innerHTML = `<h3>${subject} â†’ é¸æ“‡æ•™å¸«</h3>`;
      data[subject].forEach(teacher => {
        addButton(teacher + " è€å¸«", () => {
          historyStack.push(() => renderTeachers(subject));
          renderClasses(teacher);
        });
      });
      addBackAndHome();
    }

    function renderClasses(teacher) {
      app.innerHTML = `<h3>${teacher} â†’ é¸æ“‡ç­ç´š</h3>`;
      for (let cls in classes) {
        addButton(cls, () => {
          historyStack.push(() => renderClasses(teacher));
          renderStudents(teacher, cls);
        });
      }
      addBackAndHome();
    }

    function renderStudents(teacher, cls) {
      app.innerHTML = `<h3>${cls} â†’ é¸æ“‡å­¸ç”Ÿ</h3>`;
      classes[cls].forEach(student => {
        addButton(student, () => {
          historyStack.push(() => renderStudents(teacher, cls));
          renderForm(teacher, cls, student);
        });
      });
      addBackAndHome();
    }

    function renderForm(teacher, cls, student) {
      app.innerHTML = `<h3>è¡¨å–®å¡«å¯« (${teacher} / ${cls} / ${student})</h3>`;
      const iframe = document.createElement("iframe");
      iframe.src = `${formBase}&entry.1717510391=${encodeURIComponent(teacher)}&entry.1776778113=${encodeURIComponent(cls)}&entry.1650835019=${encodeURIComponent(student)}`;
      app.appendChild(iframe);
      addBackAndHome();
    }

    function addButton(label, onClick) {
      let btn = document.createElement("button");
      btn.textContent = label;
      btn.onclick = onClick;
      app.appendChild(btn);
    }

    function addBackAndHome() {
      let backBtn = document.createElement("button");
      backBtn.textContent = "â¬… è¿”å›ä¸Šä¸€å±¤";
      backBtn.className = "back-btn";
      backBtn.onclick = () => {
        if (historyStack.length > 0) {
          let last = historyStack.pop();
          last();
        }
      };
      app.appendChild(backBtn);

      let homeBtn = document.createElement("button");
      homeBtn.textContent = "ğŸ  å›é¦–é ";
      homeBtn.className = "home-btn";
      homeBtn.onclick = () => {
        historyStack = [];
        renderSubjects();
      };
      app.appendChild(homeBtn);
    }

    // é è¨­é¡¯ç¤º
    renderSubjects();
  </script>
</body>
</html>
